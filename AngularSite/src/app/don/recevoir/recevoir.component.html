<div class="container">

  <h3>Liste des dons a recevoir: </h3>
  <div *ngFor="let don of listeDons; let i = index">
    <div class="card mt-3 border-2"
    [class.border-success]="don.etat==2"
    [class.border-primary]="don.etat==1"
    [class.border-danger]="don.etat==0">
      <div class="card-header">
        <div class="row mb-2">
          <div class="col-md-4">Donateur: <b>{{don.nomDonateur}}</b></div>
          <div class="col-md-2">Valeur: <b>{{don.total}}$</b></div>
          <div class="col-md-6">
            Nombre d'items: <b>{{don.DonArticles.length}}</b>
            <span class="badge badge-danger float-right p-2" *ngIf="don.etat==0">Refusé</span>
            <span class="badge badge-primary float-right p-2" *ngIf="don.etat==1">Promis</span>
            <span class="badge badge-success float-right p-2" *ngIf="don.etat==2">Reçu</span>
          </div>
        </div>
        <div class="row align-bottom">
          <div class="col-md-4">Date promesse: <b>{{don.createdAt | date}}</b></div>
          <!-- <div class="col-md-4">Etat: <b>{{getEtat(don)}}</b></div> -->
          <div class="col-md-8">
            <!-- <a class="btn btn-primary mx-1 float-right stretched-link" data-toggle="collapse" href="#collapse-{{i}} " type="hidden" >Détails</a> -->
            
          </div>
        </div>
        <a class="stretched-link" data-toggle="collapse" href="#collapse-{{i}} " type="hidden" ></a>
      </div>
      <div class="collapse" id="collapse-{{i}}">
        <ul class="list-group list-group-flish">
          <li class="list-group-item" *ngFor="let donArticle of don.DonArticles; let j = index">
              <div class="row mb-2">
                <div class="col-md-2 font-weight-bold">{{donArticle.nom}}</div>
                <div class="col-md-2">Valeur: <b>{{donArticle.valeur}}$</b></div>
                <div class="col-md-2">Quantité: <b>{{donArticle.quantite}}</b></div>
                <div class="col-md-6">
                  Description
                  <p class="font-weight-light">{{donArticle.description}}</p>
                </div>
              </div>
          </li>
        </ul>
        <div class="card-footer text-right" *ngIf="don.etat==1 || don.etat==2">
          <div *ngIf="don.etat==1">
            <button class="btn btn-outline-danger mx-1 float-left" (click)="refuser(don)">Refuser</button>
            <button class="btn btn-success mx-1" (click)="recevoir(don)">Recevoir</button>
          </div>
          <div *ngIf="don.etat==2">
            <button class="btn btn-success mx-1" disabled>Distribuer</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>